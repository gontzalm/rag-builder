{% extends "partial_base.html" %}

{% block title %}Load History - {{ super() }}{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ul>
    <li><a href="#">ðŸ“¥ Load Document</a></li>
    <li>ðŸ“œ Load History</li>
  </ul>
</nav>

<button
  id="refresh-button"
  hx-get="/frontend/load-document/load-history/data"
  hx-target="#table"
  hx-swap="innerHTML"
  class="outline"
  aria-busy="false"
>
  Refresh
</button>

<table>
  <thead>
    <tr>
      <th>Load ID</th>
      <th>URL</th>
      <th>Source</th>
      <th>Status</th>
      <th>Started At</th>
      <th>Completed At</th>
      <th>Error Details</th>
    </tr>
  </thead>
  <tbody
    id="table"
    hx-get="/frontend/load-document/load-history/data"
    hx-trigger="load"
    hx-swap="innerHTML"
  >
    <tr>
      <td colspan="7" style="text-align: center">
        <p aria-busy="true">Retrieving load history...</p>
      </td>
    </tr>
  </tbody>
</table>
{% endblock %}

{% block extra_scripts %}
<script>
  document
    .getElementById("refresh-button")
    .addEventListener("htmx:beforeRequest", function (evt) {
      evt.detail.elt.setAttribute("aria-busy", "true");
    });
  document
    .getElementById("refresh-button")
    .addEventListener("htmx:afterRequest", function (evt) {
      evt.detail.elt.setAttribute("aria-busy", "false");
    });
</script>
{% endblock %}
