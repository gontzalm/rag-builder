{% extends "partial_base.html" %}

{% block title %}Available Documents - {{ super() }}{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ul>
    <li><a href="#">ðŸ“š Knowledge Base</a></li>
    <li>ðŸ“„ Available Documents</li>
  </ul>
</nav>

<button
  id="refresh-button"
  hx-get="/frontend/knowledge-base/available-documents/data"
  hx-target="#table"
  hx-swap="innerHTML"
  class="outline"
  aria-busy="false"
>
  Refresh
</button>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>URL</th>
      <th></th>
    </tr>
  </thead>
  <tbody
    id="table"
    hx-get="/frontend/knowledge-base/available-documents/data"
    hx-trigger="load"
    hx-swap="innerHTML"
  >
    <tr>
      <td colspan="7" style="text-align: center">
        <p aria-busy="true">Retrieving available documents...</p>
      </td>
    </tr>
  </tbody>
</table>
{% endblock %}

{% block extra_scripts %}
<script>
  document
    .getElementById("refresh-button")
    .addEventListener("htmx:beforeRequest", function (evt) {
      evt.detail.elt.setAttribute("aria-busy", "true");
    });
  document
    .getElementById("refresh-button")
    .addEventListener("htmx:afterRequest", function (evt) {
      evt.detail.elt.setAttribute("aria-busy", "false");
    });
</script>
{% endblock %}
