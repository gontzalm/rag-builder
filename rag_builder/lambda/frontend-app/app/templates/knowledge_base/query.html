{% extends "base.html" if not request.headers.get('HX-Request') else "partial_base.html" %}

{% block title %}Query - {{ super() }}{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <ul>
    <li><a href="#">üìö Knowledge Base</a></li>
    <li>‚ùì Query</li>
  </ul>
</nav>

<form hx-get="/frontend/knowledge-base/query/search" hx-target="#response">
  <div role="search">
    <input
      type="search"
      name="query"
      placeholder="Enter your query"
      aria-label="Query"
    />
    <button type="submit" aria-busy="false">Query</button>
  </div>
</form>

<div id="response"></div>
{% endblock %}

{% block extra_scripts %}
<script>
  document.querySelector("form").addEventListener("htmx:beforeRequest", function (evt) {
    evt.detail.elt.querySelector("button").setAttribute("aria-busy", "true");
  });
  document.querySelector("form").addEventListener("htmx:afterRequest", function (evt) {
    evt.detail.elt.querySelector("button").setAttribute("aria-busy", "false");
  });
</script>
{% endblock %}
